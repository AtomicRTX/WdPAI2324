/*
 Navicat PostgreSQL Data Transfer

 Source Server         : db
 Source Server Type    : PostgreSQL
 Source Server Version : 160001 (160001)
 Source Host           : localhost:5432
 Source Catalog        : db
 Source Schema         : public

 Target Server Type    : PostgreSQL
 Target Server Version : 160001 (160001)
 File Encoding         : 65001

 Date: 28/01/2024 22:07:28
*/


-- ----------------------------
-- Sequence structure for caterogies_category_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."caterogies_category_id_seq";
CREATE SEQUENCE "public"."caterogies_category_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9999
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for restaurants_res_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."restaurants_res_id_seq";
CREATE SEQUENCE "public"."restaurants_res_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9999
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for user_detail_detail_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."user_detail_detail_id_seq";
CREATE SEQUENCE "public"."user_detail_detail_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 9999
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for users_user_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."users_user_id_seq";
CREATE SEQUENCE "public"."users_user_id_seq" 
INCREMENT 1
MINVALUE  2
MAXVALUE 9999999
START 2
CACHE 1;

-- ----------------------------
-- Table structure for categories
-- ----------------------------
DROP TABLE IF EXISTS "public"."categories";
CREATE TABLE "public"."categories" (
  "category_id" int8 NOT NULL GENERATED ALWAYS AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 9999
START 1
CACHE 1
),
  "category_name" text COLLATE "pg_catalog"."default" NOT NULL
)
;

-- ----------------------------
-- Records of categories
-- ----------------------------
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (1, 'Italian');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (2, 'indian');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (3, 'sushi');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (4, 'mexican');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (5, 'thai');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (6, 'vietnamese');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (7, 'seafood');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (8, 'chinese');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (9, 'burgers');
INSERT INTO "public"."categories" OVERRIDING SYSTEM VALUE VALUES (10, 'vegetarian');

-- ----------------------------
-- Table structure for reservation
-- ----------------------------
DROP TABLE IF EXISTS "public"."reservation";
CREATE TABLE "public"."reservation" (
  "user_id" int4 NOT NULL,
  "res_id" int4 NOT NULL,
  "date" date NOT NULL,
  "hour" time(6) NOT NULL,
  "number_people" int4 NOT NULL
)
;

-- ----------------------------
-- Records of reservation
-- ----------------------------
INSERT INTO "public"."reservation" VALUES (14, 2, '2024-01-28', '14:00:00', 2);

-- ----------------------------
-- Table structure for restaurants
-- ----------------------------
DROP TABLE IF EXISTS "public"."restaurants";
CREATE TABLE "public"."restaurants" (
  "res_id" int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 9999
START 1
CACHE 1
),
  "res_name" text COLLATE "pg_catalog"."default",
  "res_location" text COLLATE "pg_catalog"."default",
  "res_logo" text COLLATE "pg_catalog"."default",
  "res_image" text COLLATE "pg_catalog"."default",
  "res_d" text COLLATE "pg_catalog"."default",
  "res_like" int8 DEFAULT 0
)
;

-- ----------------------------
-- Records of restaurants
-- ----------------------------
INSERT INTO "public"."restaurants" VALUES (10, 'Copernicus', 'Kanonicza 16, 31-002 Kraków', 'data:image/jpeg;base64,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', 'https://foodandfriends.pl/wp-content/uploads/2020/09/Restauracja-Copernicus-small_1.jpg', '
Located in Renaissance interiors, the Copernicus Restaurant offers guests Polish court cuisine, in a modern interpretation by the talented Chef - Krzysztof Wasio. The menu will include mushrooms, quails, game, crayfish, asparagus and other noble products. The restaurant''s guests included many distinguished personalities, including the former president of the United States - George W. Bush and Charles III, King of Great Britain.', 7);
INSERT INTO "public"."restaurants" VALUES (7, 'Karakter', 'Brzozowa 17, 31-050 Kraków', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRhnBUwuTueRMldciF13hqx6ErhagXmW5MOqJzyQZp0_A&s', 'https://visitmalopolska.pl/documents/20194/2407893/Wn%C4%99trze+Restauracja+Karakter+Krak%C3%B3w/7f3a846d-eb29-4649-9c5b-8ce596cb136b?t=1646222021501&imageThumbnail=5', 'An unpretentious restaurant specializing in burgers, steaks, seafood, original meat dishes and wine.', 2);
INSERT INTO "public"."restaurants" VALUES (8, 'Fiorentina', 'Grodzka 63, 31-044 Kraków', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTWwGyJQlQpkvPBsGeFFFaIXOEdKhrSCziJM-hBsep3jw&s', 'https://assets.superprezenty.pl/files/uploaded/programs/80df77663fe54ab18d548389eee1493c.jpeg', 'An elegant restaurant with a terrace and exposed brick walls serving innovative versions of local dishes, desserts and wine.', 6);
INSERT INTO "public"."restaurants" VALUES (5, 'Hard Rock Cafe', 'Mariacki Square 9, 31-042 Kraków', 'https://findvectorlogo.com/wp-content/uploads/2022/01/hard-rock-cafe-vector-logo-2022.png', 'https://www.hardrockcafe.com/location/warsaw/pl/files/5598/IMG_9729.JPG', 'Hard Rock Cafe Kraków is located in the very heart of old Krakow, at the Main Market Square, next to St. Mary''s Basilica. Its windows offer a view of the Krakow Market Square and the Cloth Hall. The restaurant has 130 seats, with three facilities, including bars and a Rock Shop, where you can find, among others: souvenir T-shirts with the legendary logo, collectible glass and pins.', 3);
INSERT INTO "public"."restaurants" VALUES (9, 'Pod Różą', 'Floriańska 14, 31-021 Kraków', 'https://mertz.travel/wp-content/uploads/2021/06/poroza.png', 'https://hotel.com.pl/cms/hpr/images/restaurants/podroza/galeria/images/image_1.jpg?87', 'For over 20 years, the Pod Różą Restaurant has been proud of its original cuisine, inspired by international sources. There is also no shortage of Polish, savory products and a modern approach to native cuisine. The reputation of the restaurant located in the oldest hotel in Krakow is appreciated by all gourmets of the highest level of cuisine. In 2021, the restaurant was included in the prestigious Michelin guide. Additionally, the Chef Room is waiting for people looking for new experiences and at the same time valuing intimacy. A unique project in Krakow. A restaurant intended exclusively for original tastings. Hidden in the interior of the restaurant under the rose, it attracts with an aura of mystery and elegant minimalism.', 2);
INSERT INTO "public"."restaurants" VALUES (6, 'Salta resto', 'Miodowa 19/2A, 31-055 Kraków', 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRMrfwjRlDaf4-dNu2hZ5pYV7rZxSL6GA-vz-fWMzGZaw&s', 'https://media-cdn.tripadvisor.com/media/photo-s/17/e8/fc/65/salta-resto.jpg', 'An elegant restaurant serving steaks, burgers and pastrami from carefully selected sources and a variety of wines.', 1);
INSERT INTO "public"."restaurants" VALUES (20, 'METRUM Restobistro', 'Świętego Tomasza 43, 31-027 Kraków', 'https://lh3.googleusercontent.com/p/AF1QipPhP8FBVUNQnGpwaqbnCJWHq2Ibejt-jr6DiAaR=s1600-w640', 'https://krakowtips.files.wordpress.com/2020/01/img_3455-1.jpg?w=1010&h=545&crop=1', 'As it is located in the Academy of Music, on the 6th floor, you can often hear various instruments being played. The place offers not only coffee, but also breakfast', 5);
INSERT INTO "public"."restaurants" VALUES (2, 'Bottiglieria 1881', 'Bocheńska 5, 31-061 Kraków', 'https://gronda.com/_next/image?url=https%3A%2F%2Fd2bn8tb344j6vy.cloudfront.net%2Fbottiglieria-1881-r4u%2Fprofile%2F21137_1147772378332396_902898791759576915437516270065494487.jpg&w=256&q=75', 'https://visitmalopolska.pl/documents/20194/2682896/Restauracja+Bottiglieria+1881+Krak%C3%B3w/7b413953-44e3-4a70-af2f-e78ece6e2729?t=1683540482808&imageThumbnail=5', 'We want the visit in our restaurant to become a true culinary experience. The dishes are prepared in front of our guests and refined in every way. Bottiglieria 1881 cuisine is a feast of tastes, distinctive combinations and diversity of structures. Our chefs ensure the visual side of the dishes, that is why they look like masterpieces. They are a feast for all senses, including the artistic one. Behind all this stands a creative and committed team. We want to be authentic and share out passion and mastery with you.', 8);
INSERT INTO "public"."restaurants" VALUES (14, 'Minoas Greek Tavern', 'Miodowa 9, 31-055 Kraków', 'https://lh3.googleusercontent.com/proxy/wn8bmZ_zC-OcQ2AGNnLEI0I4Vroudoq-_zoAh15W9hsih9_0Xl4xo-ckXypG71qtOcQzIXBBns0la8wxKmYzJ2RJtApc-_3OhdoGeKnhaI3FAd3y3Igu5I0', 'https://lh3.googleusercontent.com/proxy/xvtSfpR3O3zoMfh7uGcHxoYXUNBbNp0kRVulNJ7hHMVOUqw4rFjxSAO1tp9fTFWYTcYsJfyBIcmjyX794Q-egygTVTdxOhCEjZlMMS7fVYeFos4Ty2UOoNY', '
A charming café and bar serving traditional Greek dishes in a brick-walled establishment with hand-painted murals.', 5);
INSERT INTO "public"."restaurants" VALUES (15, 'Współwinni Kraków', 'Armii Krajowej 19, 30-150 Kraków', 'https://pliki.horecatrends.pl/i/02/14/24/021424_940.jpg', 'https://blurppp.com/blog/wp-content/uploads/WW-21.jpg', '
An industrial restaurant offering a diverse seasonal menu as well as creative cocktails and a wide selection of wines.', 4);
INSERT INTO "public"."restaurants" VALUES (16, 'Ima Sushi', 'Barska 69, 30-307 Kraków', 'https://lh3.googleusercontent.com/p/AF1QipOLh7S8U7mx3PWqjMilww3C5YKUgtdmScDyst9W=w768-h768-n-o-v1', 'https://rzeszow-news.pl/wp-content/uploads/2021/10/gowne1.jpg', 'In our restaurant, we focus on the highest quality products and their proper preparation so that what is on the plate reflects all our artistry, class and taste of Ima Sushi.', 8);
INSERT INTO "public"."restaurants" VALUES (17, 'Restauracja Starka Kraków', 'Józefa 14, 31-056 Kraków', 'https://scontent-waw1-1.xx.fbcdn.net/v/t39.30808-6/358708956_750936973699210_3137600530287155639_n.jpg?_nc_cat=100&ccb=1-7&_nc_sid=efb6e6&_nc_ohc=kD9CWGdnZ4oAX_TS8Tm&_nc_ht=scontent-waw1-1.xx&oh=00_AfB905PmvoLjwLiXC8gEwAOlWpDArcSI8LTm7iQBaepq-A&oe=65BBB2F5', 'https://www.pitupitu.pl/files/5baNeetRpmbUV8FswNWu9q_oUTs/coverBig', '
An intimate, cozy restaurant with 2 rooms and a bar serving nutritious modern dishes and a wide selection of vodkas.', 5);
INSERT INTO "public"."restaurants" VALUES (18, 'Piwnica Pod Baranami', 'Pałac Pod Baranami, Rynek Główny 27, 31-010 Kraków', 'https://media.krakow.travel/photos/21121/noresize.jpg', 'https://wielkahistoria.pl/wp-content/uploads/2023/03/Piwnica-pod-Baranami-mini.jpg', 'Jazz concerts, poetry and surreal comedy performances in a venue known for its literary cabaret, founded in the 1950s.', 4);
INSERT INTO "public"."restaurants" VALUES (19, 'Restauracja Miód Malina', 'Grodzka 40, 31-044 Kraków', 'https://scontent-waw1-1.xx.fbcdn.net/v/t39.30808-6/305264123_762884875064833_3548857475585721167_n.jpg?_nc_cat=103&ccb=1-7&_nc_sid=efb6e6&_nc_ohc=Y9mn-pq9WHEAX8Xf4au&_nc_ht=scontent-waw1-1.xx&oh=00_AfB6jhJKfDrcMwqhTzqYsV4wxuKyZYH1n1Y_SK9bMh2G1Q&oe=65BC26BC', 'https://s.inyourpocket.com/gallery/283999.jpg', '
An intimate restaurant with a folk decor, decorated with rustic wreaths and hand-painted cabinets with lace tablecloths.', 5);

-- ----------------------------
-- Table structure for restaurants_categories
-- ----------------------------
DROP TABLE IF EXISTS "public"."restaurants_categories";
CREATE TABLE "public"."restaurants_categories" (
  "res_id" int8 NOT NULL,
  "cat_id" int8
)
;

-- ----------------------------
-- Records of restaurants_categories
-- ----------------------------
INSERT INTO "public"."restaurants_categories" VALUES (2, 7);
INSERT INTO "public"."restaurants_categories" VALUES (2, 5);
INSERT INTO "public"."restaurants_categories" VALUES (5, 9);
INSERT INTO "public"."restaurants_categories" VALUES (5, 10);
INSERT INTO "public"."restaurants_categories" VALUES (6, 7);
INSERT INTO "public"."restaurants_categories" VALUES (6, 8);
INSERT INTO "public"."restaurants_categories" VALUES (7, 4);
INSERT INTO "public"."restaurants_categories" VALUES (7, 10);
INSERT INTO "public"."restaurants_categories" VALUES (8, 1);
INSERT INTO "public"."restaurants_categories" VALUES (8, 10);
INSERT INTO "public"."restaurants_categories" VALUES (9, 7);
INSERT INTO "public"."restaurants_categories" VALUES (10, 8);
INSERT INTO "public"."restaurants_categories" VALUES (14, 6);
INSERT INTO "public"."restaurants_categories" VALUES (15, 9);
INSERT INTO "public"."restaurants_categories" VALUES (15, 10);
INSERT INTO "public"."restaurants_categories" VALUES (16, 3);
INSERT INTO "public"."restaurants_categories" VALUES (17, 8);
INSERT INTO "public"."restaurants_categories" VALUES (18, 8);
INSERT INTO "public"."restaurants_categories" VALUES (18, 9);
INSERT INTO "public"."restaurants_categories" VALUES (19, 4);
INSERT INTO "public"."restaurants_categories" VALUES (20, 2);

-- ----------------------------
-- Table structure for types
-- ----------------------------
DROP TABLE IF EXISTS "public"."types";
CREATE TABLE "public"."types" (
  "type_id" int8 NOT NULL,
  "type_user" text COLLATE "pg_catalog"."default" NOT NULL
)
;

-- ----------------------------
-- Records of types
-- ----------------------------
INSERT INTO "public"."types" VALUES (1, 'default');
INSERT INTO "public"."types" VALUES (2, 'admin');

-- ----------------------------
-- Table structure for user_detail
-- ----------------------------
DROP TABLE IF EXISTS "public"."user_detail";
CREATE TABLE "public"."user_detail" (
  "detail_id" int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 9999
START 1
CACHE 1
),
  "name" varchar(255) COLLATE "pg_catalog"."default",
  "surname" varchar(255) COLLATE "pg_catalog"."default",
  "phone" varchar(255) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Records of user_detail
-- ----------------------------
INSERT INTO "public"."user_detail" VALUES (2, 'Piotr', 'Zuczek', '123123123');
INSERT INTO "public"."user_detail" VALUES (3, 'Dawid', 'Kubacki', '730784502');
INSERT INTO "public"."user_detail" VALUES (6, 'Stefan', 'Hula', '765928455');
INSERT INTO "public"."user_detail" VALUES (7, 'Maciej', 'Kot', '537648728');
INSERT INTO "public"."user_detail" VALUES (8, 'Jakub', 'Wolny', '123657849');
INSERT INTO "public"."user_detail" VALUES (9, 'Kamil', 'Stoch', '647928400');
INSERT INTO "public"."user_detail" VALUES (10, 'Aleksander', 'Zniszczoł', '758920645');
INSERT INTO "public"."user_detail" VALUES (11, 'Marcin', 'Wróbel', '354728997');
INSERT INTO "public"."user_detail" VALUES (12, 'Krystian', 'Zygmuntowicz', '345726846');

-- ----------------------------
-- Table structure for user_types
-- ----------------------------
DROP TABLE IF EXISTS "public"."user_types";
CREATE TABLE "public"."user_types" (
  "user_id" int8,
  "type_id" int8
)
;

-- ----------------------------
-- Records of user_types
-- ----------------------------
INSERT INTO "public"."user_types" VALUES (13, 1);
INSERT INTO "public"."user_types" VALUES (14, 2);
INSERT INTO "public"."user_types" VALUES (17, 1);
INSERT INTO "public"."user_types" VALUES (18, 1);
INSERT INTO "public"."user_types" VALUES (19, 1);
INSERT INTO "public"."user_types" VALUES (20, 1);
INSERT INTO "public"."user_types" VALUES (21, 1);
INSERT INTO "public"."user_types" VALUES (22, 1);
INSERT INTO "public"."user_types" VALUES (23, 1);

-- ----------------------------
-- Table structure for users
-- ----------------------------
DROP TABLE IF EXISTS "public"."users";
CREATE TABLE "public"."users" (
  "user_id" int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  2
MAXVALUE 9999999
START 2
CACHE 1
),
  "detail_id" int8 NOT NULL,
  "email" text COLLATE "pg_catalog"."default" NOT NULL,
  "password" text COLLATE "pg_catalog"."default" NOT NULL
)
;

-- ----------------------------
-- Records of users
-- ----------------------------
INSERT INTO "public"."users" VALUES (13, 2, 'piotr.zyla@gmail.com', '$2y$10$A01h9FkwvSfYoMThw6OrbeXIfy3oFrQ/FnhNaf8DRDj.GFy3zcSMC');
INSERT INTO "public"."users" VALUES (14, 3, 'dawid.kubacki@gmail.com', '$2y$10$KaAUrWGCR6PuKbrYAoT0c.lhWgQzQQbWIjzZzouWolXrx1.YOav8O');
INSERT INTO "public"."users" VALUES (17, 6, 'stefan.hula@gmail.com', '$2y$10$cI6zjBxXUwide/gTHMmq8.IL50aDTUV/MZBQFvI422ebcBufJGkxO');
INSERT INTO "public"."users" VALUES (18, 7, 'maciej.kot@gmail.com', '$2y$10$QJcZOp0KZn6K34Ig8vwCV.oaKJfwYHbaq39cRZXpo5FUiMja481fS');
INSERT INTO "public"."users" VALUES (19, 8, 'jakub.wolny@gmail.com', '$2y$10$OMELaYJ1BW5yF4ZxHqipB.yMnyPdQN6wOo9sqd0Vd2Ow7G6aaP4Rm');
INSERT INTO "public"."users" VALUES (20, 9, 'kamil.stoch@gmail.com', '$2y$10$Dq1/8N180Vx66IuZ4TKSp.4G/u3HaCJiiH66FLFoUFBh7724enaFK');
INSERT INTO "public"."users" VALUES (21, 10, 'alek.zniszczol@gmail.com', '$2y$10$LgbUlpDmPqUZ.GsTCOubseey2B3/B3RbSTXOjbNeyP2WxCto60cHu');
INSERT INTO "public"."users" VALUES (22, 11, 'marcin.wrobel@gmail.com', '$2y$10$3fvtO9/gvWmCDXr6kuyvTOguW7aqNQQN8D5nNw3Kg1MhL6rK2/WDW');
INSERT INTO "public"."users" VALUES (23, 12, 'krzysiek.zygmunt@gmail.com', '$2y$10$A7pCfyd8Yuuc1TVrteXX0eSYcWxO9QWb2/XRpl6vj2t7PpDS6knZe');

-- ----------------------------
-- Table structure for work_hours
-- ----------------------------
DROP TABLE IF EXISTS "public"."work_hours";
CREATE TABLE "public"."work_hours" (
  "res_id" int4 NOT NULL,
  "start_hour" time(6),
  "end_hour" time(6)
)
;

-- ----------------------------
-- Records of work_hours
-- ----------------------------
INSERT INTO "public"."work_hours" VALUES (5, '15:00:00', '23:00:00');
INSERT INTO "public"."work_hours" VALUES (7, '12:00:00', '20:00:00');
INSERT INTO "public"."work_hours" VALUES (6, '14:00:00', '19:00:00');
INSERT INTO "public"."work_hours" VALUES (8, '14:00:00', '23:00:00');
INSERT INTO "public"."work_hours" VALUES (9, '12:00:00', '19:00:00');
INSERT INTO "public"."work_hours" VALUES (10, '13:00:00', '21:00:00');
INSERT INTO "public"."work_hours" VALUES (15, '14:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (17, '14:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (19, '14:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (20, '14:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (14, '16:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (16, '17:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (18, '11:00:00', '22:00:00');
INSERT INTO "public"."work_hours" VALUES (2, '11:00:00', '21:00:00');

-- ----------------------------
-- Function structure for add_default_work_hours
-- ----------------------------
DROP FUNCTION IF EXISTS "public"."add_default_work_hours"();
CREATE OR REPLACE FUNCTION "public"."add_default_work_hours"()
  RETURNS "pg_catalog"."trigger" AS $BODY$
BEGIN
    INSERT INTO public.work_hours (res_id, start_hour, end_hour)
    VALUES (NEW.res_id, '14:00:00', '22:00:00');

    RETURN NEW;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;

-- ----------------------------
-- Function structure for make_reservation_by_email
-- ----------------------------
DROP FUNCTION IF EXISTS "public"."make_reservation_by_email"("in_user_email" text, "in_res_id" int4, "in_date" date, "in_hour" time, "in_number_people" int4);
CREATE OR REPLACE FUNCTION "public"."make_reservation_by_email"("in_user_email" text, "in_res_id" int4, "in_date" date, "in_hour" time, "in_number_people" int4)
  RETURNS "pg_catalog"."text" AS $BODY$
DECLARE
    _user_id INT;
    existing_reservations INT;
		max_allowed_date DATE;
BEGIN
        SELECT user_id INTO _user_id
        FROM public.users
        WHERE email = in_user_email;

        SELECT COUNT(*) INTO existing_reservations
        FROM public.reservation
        WHERE date = in_date
						AND hour = in_hour
						AND res_id = in_res_id;

				IF in_date < CURRENT_DATE THEN
						RETURN 'You cannot reserve in past. Unless you have a Delorian.';
				END IF;
				
				IF in_date = CURRENT_DATE AND in_hour <= CURRENT_TIME THEN
						RETURN 'You cannot reserve in past. Unless you have a Delorian.';
				END IF;
				
				max_allowed_date := CURRENT_DATE + INTERVAL '1 year';
				
				IF in_date > max_allowed_date THEN
						RETURN 'You cannot reserve for a date too far in the future. Unless you have a Delorian.';
				END IF;

        IF existing_reservations < 2 THEN
            INSERT INTO public.reservation (user_id, res_id, date, hour, number_people)
            VALUES (_user_id, in_res_id, in_date, in_hour, in_number_people);

            RETURN 'Reservation successfully saved!';
        ELSE
            RETURN 'You cannot reserve for that date and time at this restaurant.';
        END IF;
END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."caterogies_category_id_seq"
OWNED BY "public"."categories"."category_id";
SELECT setval('"public"."caterogies_category_id_seq"', 10, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."restaurants_res_id_seq"
OWNED BY "public"."restaurants"."res_id";
SELECT setval('"public"."restaurants_res_id_seq"', 20, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."user_detail_detail_id_seq"
OWNED BY "public"."user_detail"."detail_id";
SELECT setval('"public"."user_detail_detail_id_seq"', 12, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."users_user_id_seq"
OWNED BY "public"."users"."user_id";
SELECT setval('"public"."users_user_id_seq"', 23, true);

-- ----------------------------
-- Auto increment value for categories
-- ----------------------------
SELECT setval('"public"."caterogies_category_id_seq"', 10, true);

-- ----------------------------
-- Primary Key structure for table categories
-- ----------------------------
ALTER TABLE "public"."categories" ADD CONSTRAINT "caterogies_pkey" PRIMARY KEY ("category_id");

-- ----------------------------
-- Auto increment value for restaurants
-- ----------------------------
SELECT setval('"public"."restaurants_res_id_seq"', 20, true);

-- ----------------------------
-- Triggers structure for table restaurants
-- ----------------------------
CREATE TRIGGER "after_insert_restaurants" AFTER INSERT ON "public"."restaurants"
FOR EACH ROW
EXECUTE PROCEDURE "public"."add_default_work_hours"();

-- ----------------------------
-- Primary Key structure for table restaurants
-- ----------------------------
ALTER TABLE "public"."restaurants" ADD CONSTRAINT "restaurants_pkey" PRIMARY KEY ("res_id");

-- ----------------------------
-- Primary Key structure for table types
-- ----------------------------
ALTER TABLE "public"."types" ADD CONSTRAINT "users_type_pkey" PRIMARY KEY ("type_id");

-- ----------------------------
-- Auto increment value for user_detail
-- ----------------------------
SELECT setval('"public"."user_detail_detail_id_seq"', 12, true);

-- ----------------------------
-- Primary Key structure for table user_detail
-- ----------------------------
ALTER TABLE "public"."user_detail" ADD CONSTRAINT "user_detail_pkey" PRIMARY KEY ("detail_id");

-- ----------------------------
-- Auto increment value for users
-- ----------------------------
SELECT setval('"public"."users_user_id_seq"', 23, true);

-- ----------------------------
-- Uniques structure for table users
-- ----------------------------
ALTER TABLE "public"."users" ADD CONSTRAINT "user_id_u" UNIQUE ("user_id");
ALTER TABLE "public"."users" ADD CONSTRAINT "email_u" UNIQUE ("email");

-- ----------------------------
-- Primary Key structure for table users
-- ----------------------------
ALTER TABLE "public"."users" ADD CONSTRAINT "users_pkey" PRIMARY KEY ("user_id");

-- ----------------------------
-- Uniques structure for table work_hours
-- ----------------------------
ALTER TABLE "public"."work_hours" ADD CONSTRAINT "resId" UNIQUE ("res_id");

-- ----------------------------
-- Foreign Keys structure for table reservation
-- ----------------------------
ALTER TABLE "public"."reservation" ADD CONSTRAINT "res_id" FOREIGN KEY ("res_id") REFERENCES "public"."restaurants" ("res_id") ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE "public"."reservation" ADD CONSTRAINT "user_id" FOREIGN KEY ("user_id") REFERENCES "public"."users" ("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table restaurants_categories
-- ----------------------------
ALTER TABLE "public"."restaurants_categories" ADD CONSTRAINT "cat_id" FOREIGN KEY ("cat_id") REFERENCES "public"."categories" ("category_id") ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE "public"."restaurants_categories" ADD CONSTRAINT "res_id" FOREIGN KEY ("res_id") REFERENCES "public"."restaurants" ("res_id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table user_types
-- ----------------------------
ALTER TABLE "public"."user_types" ADD CONSTRAINT "type_id" FOREIGN KEY ("type_id") REFERENCES "public"."types" ("type_id") ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE "public"."user_types" ADD CONSTRAINT "user_id" FOREIGN KEY ("user_id") REFERENCES "public"."users" ("user_id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table users
-- ----------------------------
ALTER TABLE "public"."users" ADD CONSTRAINT "det_id" FOREIGN KEY ("detail_id") REFERENCES "public"."user_detail" ("detail_id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table work_hours
-- ----------------------------
ALTER TABLE "public"."work_hours" ADD CONSTRAINT "res_id" FOREIGN KEY ("res_id") REFERENCES "public"."restaurants" ("res_id") ON DELETE NO ACTION ON UPDATE NO ACTION;
